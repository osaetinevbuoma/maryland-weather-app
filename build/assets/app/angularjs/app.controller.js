//# sourceMappingURL=app.controller.js.map
(function(){angular.module("WeatherAppControllers",[]).controller("StateManagementController",["$scope","WeatherAppService",function(a,c){a.currentPage=0;a.limit=10;a.search="";a.states=[];a.edit=!1;$(".add-dialog").hide();$(".delete-dialog").hide();c.fetchStates(function(b){a.states=b.data;a.totalPages=Math.ceil(b.data.length/a.limit)});a.addState=function(){$(".add-dialog").dialog({title:"Add State",modal:!0,closeOnEscape:!0,draggable:!1,resizable:!1,height:"auto",position:{my:"center top+15%",
at:"center top+15%",of:window},show:"puff",hide:"puff",buttons:{Close:function(){$(this).find(".js-save-loading").html("");$(this).find(".js-save-form input").val("");$(this).dialog("close")}}})};a.saveState=function(){var b={name:a.saveName,city:a.saveCity,lgas:parseInt(a.saveLgas),latitude:a.saveLat,longitude:a.saveLng};$(".js-save-form input").attr({disabled:!0});$(".js-save-form button").attr({disabled:!0});$(".js-save-loading").html("<i class='fa fa-spinner fa-pulse'></i>");c.saveState(b,function(b){$(".js-save-form input").attr({disabled:!1});
$(".js-save-form button").attr({disabled:!1});$(".js-save-loading").html("<i class='text-success'>Saved. Add more?</i>");a.saveName=null;a.saveCity=null;a.saveLgas=null;a.saveLat=null;a.saveLng=null;a.states.push(b.data)},function(a){$(".js-save-form input").attr({disabled:!1});$(".js-save-form button").attr({disabled:!1});$(".js-save-loading").html("<i class='text-danger'>Error occurred while updating state</i>")})};a.editState=function(b){a.edit=!0;a.editName=a.states[b].name;a.editCity=a.states[b].city;
a.editLgas=a.states[b].lgas;a.editLat=a.states[b].latitude;a.editLng=a.states[b].longitude;a.editId=a.states[b].id;a.editIndex=b};a.updateState=function(){$(".js-update-form input").attr({disabled:!0});$(".js-update-form button").attr({disabled:!0});$(".js-update-loading").html("<i class='fa fa-spinner fa-pulse'></i>");c.updateState({id:a.editId,name:a.editName,city:a.editCity,lgas:a.editLgas,latitude:a.editLat,longitude:a.editLng},function(b){$(".js-update-form input").attr({disabled:!1});$(".js-update-form button").attr({disabled:!1});
$(".js-update-loading").html("");a.states[a.editIndex].name=a.editName;a.states[a.editIndex].city=a.editCity;a.states[a.editIndex].lgas=a.editLgas;a.states[a.editIndex].latitude=a.editLat;a.states[a.editIndex].longitude=a.editLng;a.edit=!1},function(a){$(".js-update-form input").attr({disabled:!1});$(".js-update-form button").attr({disabled:!1});$(".js-update-loading").html("<i class='text-danger'>Error occurred while updating state</i>")})};a.closeEditForm=function(){a.edit=!1};a.deleteState=function(b){a.stateName=
a.states[b].name;$(".delete-dialog").dialog({title:"Delete Confirmation",modal:!0,closeOnEscape:!0,draggable:!1,resizable:!1,height:"auto",position:{my:"center top+15%",at:"center top+15%",of:window},show:"puff",hide:"puff",buttons:{Delete:function(){c.deleteState(a.states[b].id,function(){a.states.splice(b,1)});$(this).dialog("close")},Close:function(){$(this).dialog("close")}}})}}])})();